# TodoMVC-Tests

Автор: schizm.one@gmail.com

Проект с автоматическими тестами для веб-приложения [TodoMVC](http://todomvc.com/examples/react/).

Тесты реализованы с использованием библиотеки [Selenium](https://selenium-python.readthedocs.io/index.html) для
тестирования веб-приложений, а также c тестовым фреймвороком [pytest](https://docs.pytest.org/en/latest/contents.html).

Прежде чем запускать автоматические тесты, рекомендую ознакомиться со спецификацией
к приложению и тест-планом для него, которые можно найти в папке **docs**.

## Структура проекта

* **docs** - директория со спецификацией и тест-планом;
* **tests** - директория с автоматизированными тестами;
* **webdrivers** - директория с веб-драйверами для браузеров. Автоматически создается во время подготовки;
* **venv** - директория с исполняемыми файлами и модулями для работы в виртуальном окружении.
* requirements.txt - файл с необходимыми модулями для работы виртуального окружения;
* setup_tests.py - сценарий для автоматической подготовки проекта к запуску тестов.

## Установка
1. Если вы хотите загрузить проект себе средствами Git,
то откройте терминал, переместитесь в директорию, куда вы хотите
загрузить проект, а затем просто клонируйте репозиторий, введя следующую команду:
   
    `git clone https://github.com/SchizmOne/TodoMVC-Tests`
   
    Альтернативно, вы можете просто нажать на кнопку **Clone or download**" и
    загрузить ZIP-архив. После чего, внутри терминала, переместитесь в директорию с проектом.
   
2. Убедитесь, что у вас установлен **Python 3**, который вы можете загрузить [здесь](https://www.python.org/downloads/).

3. Запустите сценарий **setup_tests.py**, который подготовит окружение к запуску
тестов, введя следующую команду:

   Windows:
   
   `python setup_tests.py`
   
   Linux:
   
   `python3 setup_tests.py` 
   
4. Если на 3-м шаге что-то пошло не так, то выполните инструкции в данном шаге.
   Если нет, то пропустите его и сразу идите к 5-му.
   
   Инструкции:
   * Создайте в проекте директорию **webdrivers**;
   * Создайте виртуальное окружение для запуска и загрузите все необходимые модули:
   
       Windows:
       * Откройте терминал;
       * Введите команды:  
       `python -m venv venv`  
       `venv\Scripts\pip install -r requirements.txt`

       Linux:
       * Откройте терминал;
       * Введите команды:  
       `python3 -m venv venv`  
       `venv/bin/pip3 install -r requirements.txt`

5. Загрузите веб-драйвер для вашего браузера, чтобы в дальнейшем тесты могли
бы его автоматически запускать. Драйверы можно загрузить [здесь](https://selenium-python.readthedocs.io/installation.html#drivers).

   Обратите внимание на то, что вам нужно загрузить драйвер для вашего
   конкретного браузера. Данные тесты реализованы для **Google Chrome** и
   **Mozilla Firefox**, поэтому загружайте драйвер для кого-то из них.
   Если же у вас нет такого браузера, то сначала установите его, а уже
   потом загрузите сам драйвер. Кроме того, проверьте текущую версию вашего
   браузера, потому что **версия драйвера должна совпадать с версией браузера**.
   
   После этого, поместите исполняемый файл-драйвер в созданную директорию **webdrivers**.

# Запуск тестов

Когда все подготовительные этапы завершены, вы можете запустить тесты. Для этого вам
нужно будет активировать виртуальное окружение и в нем запустить тестовый
фреймворк **pytest**.

Убедитесь, что вы открыли терминал и находитесь в директории с проектом.
После чего активируйте виртуальное окружение:


Windows:

`venv\Scripts\activate`  

Linux:

`source venv/bin/activate`  

Тесты запускаются вызовом **pytest** через консоль. Информацию о всех возможных
режимах запуска pytest вы можете найти в [официальной документации](https://docs.pytest.org/en/latest/contents.html).

Помимо этого, добавлены опциональные аргументы для данного набора тестов:
* **--browser** - браузер, для которого будут запущены тесты. По умолчанию,
тесты запускаются для Mozilla Firefox;
* **--headless** - флаг для запуска тестов в headless-режиме, т.е. без UI.

Примеры запуска:

`pytest -v # Запустить тесты для браузера Mozilla Firefox`  
`pytest -v --browser=Chrome # Запустить тесты для браузера Google Chrome`  
`pytest -v --browser=Firefox --headless # Запустить тесты для браузера Mozilla Firefox в headless-режиме`   

# Известные проблемы

* Тесты в файле могут не работать с
веб-браузером **Chromium**. Это происходит из-за того, что веб-драйвер
**chromedriver** может быть не совместим c данным веб-браузером. Если вы
хотите запустить тесты на Linux, то советую запускать их только для
**Mozilla Firefox**.

* Если во время прогона тестов для **Google Chrome** вы видите в терминале
ошибку вида:  
`Bluetooth: bluetooth_adapter_winrt.cc:1060 Getting Default Adapter failed.`  
Это всего лишь означает, что браузер не может определить ваш **bluetooth**-адаптер по умолчанию.